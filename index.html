<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Cerberus Bites | Sourdough from the Underworld</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Cerberus Bites ‚Äî Sourdough melts forged in flame. If the hound doesn‚Äôt approve it, it doesn‚Äôt leave the kitchen." />

  <style>
    :root{
      --bg:#050308;
      --bg-alt:#0c050b;
      --accent:#ca3400;
      --accent-soft:#7e0f1d;
      --gold:#f5c97a;
      --text:#f4f2f6;
      --muted:#b3a9c0;
      --border:#312033;
      --theme-name:"Base";
      --theme-window:"Between sabbats";
    }

    *{box-sizing:border-box;margin:0;padding:0;}

    body{
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
      background:radial-gradient(circle at top,color-mix(in srgb,var(--accent-soft) 22%,#000 78%) 0,var(--bg) 60%,#020107 100%);
      color:var(--text);
      line-height:1.6;
      transition:background .45s ease,color .45s ease;
    }

    a{color:var(--gold);text-decoration:none;}
    a:hover{text-decoration:underline;}
    .container{max-width:1100px;margin:0 auto;padding:0 1.25rem;}

    /* Loading Overlay */
    .loader-overlay{
      position:fixed;inset:0;
      background:radial-gradient(circle at top,color-mix(in srgb,var(--accent-soft) 28%,#000 72%) 0,var(--bg) 60%,#020107 100%);
      display:flex;align-items:center;justify-content:center;
      z-index:9999;
      transition:opacity .6s ease,transform .6s ease;
    }
    .loader-inner{
      text-align:center;
      padding:1.5rem 2rem;
      border-radius:20px;
      border:1px solid color-mix(in srgb,var(--gold) 55%,transparent);
      background:radial-gradient(circle at top,color-mix(in srgb,var(--accent-soft) 68%,transparent),rgba(5,3,8,.98));
      box-shadow:0 0 30px rgba(0,0,0,.9);
    }
    .loader-symbol{
      width:56px;height:56px;margin:0 auto .9rem;
      border-radius:999px;
      border:1px solid color-mix(in srgb,var(--gold) 70%,transparent);
      display:flex;align-items:center;justify-content:center;
      font-family:"Georgia","Times New Roman",serif;
      font-size:1.05rem;letter-spacing:.14em;text-transform:uppercase;
      background:radial-gradient(circle,var(--accent) 0,var(--bg) 68%);
      color:#fdf3e0;
      box-shadow:0 0 22px color-mix(in srgb,var(--accent) 80%,transparent);
      animation:loaderPulse 1.6s ease-in-out infinite;
    }
    .loader-text-main{
      font-family:"Georgia","Times New Roman",serif;
      font-size:1rem;
      letter-spacing:.16em;
      text-transform:uppercase;
      color:color-mix(in srgb,var(--gold) 70%,#fff 30%);
      margin-bottom:.35rem;
    }
    .loader-text-sub{
      font-size:.8rem;color:var(--muted);letter-spacing:.08em;text-transform:uppercase;
    }
    body.loaded .loader-overlay{opacity:0;transform:translateY(-12px);pointer-events:none;}
    @keyframes loaderPulse{
      0%{transform:scale(1);box-shadow:0 0 10px color-mix(in srgb,var(--accent) 40%,transparent);}
      50%{transform:scale(1.05);box-shadow:0 0 26px color-mix(in srgb,var(--accent) 85%,transparent);}
      100%{transform:scale(1);box-shadow:0 0 10px color-mix(in srgb,var(--accent) 40%,transparent);}
    }

    /* Banner */
    .coming-soon-banner{
      background:linear-gradient(to right,var(--accent-soft),var(--accent),var(--accent-soft));
      padding:.6rem 1rem;
      text-align:center;
      color:#f5e6dc;
      font-family:"Georgia","Times New Roman",serif;
      font-size:.9rem;
      letter-spacing:.15em;
      text-transform:uppercase;
      box-shadow:0 0 18px color-mix(in srgb,var(--accent) 70%,transparent);
      position:relative;overflow:hidden;
      animation:flameFlicker 2.4s ease-in-out infinite alternate;
    }
    @keyframes flameFlicker{
      0%{opacity:.9;text-shadow:0 0 6px rgba(0,0,0,.8),0 0 14px color-mix(in srgb,var(--gold) 60%,transparent);transform:translateY(0);}
      55%{opacity:1;text-shadow:0 0 9px rgba(0,0,0,.9),0 0 18px color-mix(in srgb,var(--gold) 85%,transparent);transform:translateY(-.6px);}
      100%{opacity:1;text-shadow:0 0 11px rgba(0,0,0,.95),0 0 22px color-mix(in srgb,var(--gold) 95%,transparent);transform:translateY(-.4px);}
    }

    /* Header */
    .hb-header{
      position:sticky;top:0;z-index:50;
      background:linear-gradient(to right,rgba(5,3,8,.96),rgba(7,1,1,.96));
      border-bottom:1px solid rgba(245,201,122,.22);
      backdrop-filter:blur(10px);
      box-shadow:0 0 18px rgba(0,0,0,.9),inset 0 -1px 0 color-mix(in srgb,var(--accent) 30%,transparent);
      transform:translateY(-18px);
      opacity:0;
      transition:transform .55s cubic-bezier(.22,.9,.35,1.1),opacity .55s ease;
    }
    .hb-header.revealed{transform:translateY(0);opacity:1;}
    .hb-header.scrolled{box-shadow:0 0 26px rgba(0,0,0,1),0 0 30px color-mix(in srgb,var(--accent) 55%,transparent);}

    .nav{display:flex;align-items:center;justify-content:space-between;gap:1.25rem;padding:.4rem 0;font-size:.95rem;}
    .nav-links-left{display:flex;gap:1.4rem;font-size:.85rem;}
    .nav-links-left a{
      position:relative;
      text-transform:uppercase;
      letter-spacing:.14em;
      color:var(--muted);
      padding-bottom:.15rem;
      transition:color .2s ease;
    }
    .nav-links-left a::after{
      content:"";
      position:absolute;left:0;bottom:-.2rem;height:2px;width:0;border-radius:999px;
      background:linear-gradient(to right,var(--gold),var(--accent),var(--accent-soft));
      box-shadow:0 0 10px color-mix(in srgb,var(--accent) 80%,transparent);
      opacity:0;
      transition:width .22s ease,opacity .22s ease;
    }
    .nav-links-left a:hover{color:var(--gold);}
    .nav-links-left a:hover::after{width:100%;opacity:1;}

    .nav-center{display:flex;align-items:center;gap:.6rem;text-align:center;}
    .nav-logo-link{display:flex;align-items:center;justify-content:center;}
    .logo-img{
      height:90px;width:auto;display:block;
      filter:drop-shadow(0 0 12px color-mix(in srgb,var(--accent) 80%,transparent));
      transition:height .25s ease,transform .25s ease,filter .25s ease;
      user-select:none;-webkit-user-drag:none;
    }
    .hb-header.scrolled .logo-img{height:68px;filter:drop-shadow(0 0 8px color-mix(in srgb,var(--accent) 70%,transparent));}
    .logo-img:hover{animation:logoFlame 1s ease-in-out infinite alternate;}
    @keyframes logoFlame{
      0%{transform:translateY(0) scale(1);filter:drop-shadow(0 0 10px color-mix(in srgb,var(--accent) 80%,transparent));}
      100%{transform:translateY(-1px) scale(1.03);filter:drop-shadow(0 0 18px color-mix(in srgb,var(--accent) 100%,transparent));}
    }

    .nav-brand-text .brand-name{
      font-family:"Georgia","Times New Roman",serif;
      font-size:1.05rem;
      letter-spacing:.1em;
      text-transform:uppercase;
    }
    .nav-brand-text .brand-subtitle{
      font-size:.7rem;
      letter-spacing:.16em;
      text-transform:uppercase;
      color:var(--muted);
    }

    .nav-right{display:flex;align-items:center;}
    .nav-cta{
      border-radius:999px;
      border:1px solid color-mix(in srgb,var(--gold) 85%,transparent);
      padding:.45rem 1.2rem;
      font-size:.8rem;
      letter-spacing:.16em;
      text-transform:uppercase;
      background:
        radial-gradient(circle at top left,color-mix(in srgb,var(--accent) 90%,transparent),transparent),
        radial-gradient(circle at bottom right,color-mix(in srgb,var(--accent-soft) 90%,transparent),rgba(5,3,8,.95));
      color:#fff;
      box-shadow:0 0 16px color-mix(in srgb,var(--accent) 90%,transparent),0 0 4px color-mix(in srgb,var(--gold) 80%,transparent);
      cursor:pointer;
      position:relative;
      overflow:hidden;
      white-space:nowrap;
    }
    .nav-cta::after{
      content:"";
      position:absolute;inset:0;
      background:radial-gradient(circle at 0% 50%,color-mix(in srgb,var(--gold) 35%,transparent),transparent 55%);
      transform:translateX(-120%);
      transition:transform .35s ease-out;
      pointer-events:none;
    }
    .nav-cta:hover::after{transform:translateX(120%);}
    .nav-cta:hover{
      box-shadow:0 0 22px color-mix(in srgb,var(--accent) 100%,transparent),0 0 10px color-mix(in srgb,var(--gold) 90%,transparent);
    }

    main{padding-bottom:4rem;}

    /* Hero */
    .hero{padding:3.2rem 0 2.8rem;}
    .hero-grid{display:grid;grid-template-columns:minmax(0,1.2fr) minmax(0,1fr);gap:2.5rem;align-items:center;}
    .hero-eyebrow{
      text-transform:uppercase;
      letter-spacing:.3em;
      font-size:.7rem;
      color:var(--gold);
      opacity:.92;
      margin-bottom:.75rem;
    }
    .hero-title{
      font-family:"Georgia","Times New Roman",serif;
      line-height:1.1;
      margin-bottom:1rem;
      text-shadow:0 0 18px rgba(0,0,0,.8);
    }
    .hero-title .hero-brand{
      font-size:clamp(2.6rem,5vw,3.5rem);
      display:inline-block;
      color:var(--text);
    }
    .hero-title .hero-subbrand{
      display:block;
      margin-top:.25rem;
      font-size:clamp(1.05rem,2vw,1.35rem);
      letter-spacing:.08em;
      color:var(--gold);
      text-transform:uppercase;
      opacity:.95;
    }
    .hero-subtitle{color:var(--muted);font-size:.95rem;max-width:38rem;margin-bottom:1.25rem;}
    .hero-actions{display:flex;flex-wrap:wrap;gap:.75rem;align-items:center;}
    .btn{
      display:inline-flex;align-items:center;justify-content:center;
      border-radius:999px;border:1px solid transparent;
      padding:.55rem 1.3rem;font-size:.85rem;text-transform:uppercase;letter-spacing:.16em;
      cursor:pointer;text-decoration:none;
    }
    .btn-primary{
      background:linear-gradient(135deg,var(--accent),var(--accent-soft));
      color:#fff;
      box-shadow:0 0 18px color-mix(in srgb,var(--accent) 70%,transparent);
    }
    .btn-primary:hover{filter:brightness(1.05);}
    .btn-ghost{
      border-color:rgba(245,201,122,.5);
      color:var(--gold);
      background:rgba(5,3,8,.6);
    }
    .btn-ghost:hover{background:rgba(245,201,122,.08);}
    .hero-note{font-size:.8rem;color:var(--muted);}

    .hero-art{
      border-radius:24px;
      border:1px solid rgba(245,201,122,.3);
      padding:1px;
      background:radial-gradient(circle at top,color-mix(in srgb,var(--accent) 75%,transparent),var(--bg));
      box-shadow:0 0 32px color-mix(in srgb,var(--accent) 45%,transparent),0 0 80px rgba(0,0,0,.9);
    }
    .hero-art-inner{
      border-radius:22px;
      background:radial-gradient(circle at bottom,var(--bg) 0,color-mix(in srgb,var(--accent-soft) 18%,var(--bg) 82%) 45%,var(--bg) 100%);
      padding:1.3rem;
      display:flex;
      flex-direction:column;
      gap:1rem;
    }
    .hero-art-title{
      font-family:"Georgia","Times New Roman",serif;
      font-size:1.05rem;
      letter-spacing:.15em;
      text-transform:uppercase;
    }
    .hero-art-grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:.75rem;font-size:.8rem;}
    .hero-card{
      border-radius:16px;
      border:1px solid rgba(245,201,122,.25);
      padding:.6rem .7rem;
      background:radial-gradient(circle at top left,color-mix(in srgb,var(--accent-soft) 55%,transparent),rgba(5,3,8,.9));
      position:relative;
      overflow:hidden;
    }
    .hero-card h4{
      font-size:.78rem;
      text-transform:uppercase;
      letter-spacing:.16em;
      color:var(--gold);
      margin-bottom:.2rem;
    }
    .hero-card p{font-size:.78rem;color:var(--muted);}

    section{padding:2.5rem 0;border-top:1px solid rgba(245,201,122,.12);}
    .section-header{margin-bottom:1.5rem;text-align:left;}
    .section-eyebrow{text-transform:uppercase;letter-spacing:.28em;font-size:.7rem;color:var(--gold);margin-bottom:.2rem;}
    .section-title-row{display:flex;align-items:center;gap:.6rem;}
    .section-title{font-family:"Georgia","Times New Roman",serif;font-size:1.4rem;margin-bottom:.3rem;}
    .section-subtitle{font-size:.88rem;color:var(--muted);max-width:40rem;}

    /* Seasonal callout */
    .season-callout{
      border:1px solid rgba(245,201,122,.35);
      border-radius:14px;
      padding:.9rem 1.2rem;
      margin:1rem 0 1.5rem;
      background:radial-gradient(circle at top left,color-mix(in srgb,var(--accent) 16%,transparent),rgba(5,3,8,.9));
      backdrop-filter:blur(4px);
      box-shadow:0 0 18px rgba(0,0,0,.6);
      animation:calloutFade .7s ease-out both;
    }
    .season-title{color:var(--gold);text-transform:uppercase;font-size:.88rem;letter-spacing:.16em;}
    .season-message{font-size:.82rem;color:var(--muted);margin-top:.25rem;}
    @keyframes calloutFade{from{opacity:0;transform:translateY(8px);}to{opacity:1;transform:translateY(0);} }

    /* Secret star */
    .secret-star{
      width:18px;height:18px;border-radius:999px;
      border:1px solid rgba(245,201,122,.55);
      display:inline-flex;align-items:center;justify-content:center;
      font-size:.7rem;color:#f5e6dc;
      cursor:pointer;opacity:.35;
      box-shadow:0 0 6px rgba(245,201,122,.35);
      transition:opacity .25s ease,transform .25s ease,box-shadow .25s ease;
      background:radial-gradient(circle at top,rgba(245,201,122,.2),transparent 60%);
    }
    .secret-star span{transform:translateY(-.5px);}
    .secret-star:hover{opacity:.75;transform:scale(1.05);box-shadow:0 0 10px rgba(245,201,122,.75);}
    .secret-star.active{opacity:1;box-shadow:0 0 12px rgba(245,201,122,1),0 0 20px rgba(202,52,0,.9);}

    /* Secret menu panel */
    .secret-menu{
      margin-top:1.4rem;
      border-radius:18px;
      border:1px dashed rgba(245,201,122,.4);
      background:radial-gradient(circle at top left,rgba(15,3,10,.97),rgba(5,3,8,.98));
      padding:1.1rem 1.2rem;
      font-size:.85rem;
      display:none;
      position:relative;
      overflow:hidden;
      opacity:0;
      transform:translateY(8px);
    }
    .secret-menu::before{
      content:"";
      position:absolute;inset:0;
      background:
        radial-gradient(circle at 10% 0%,rgba(245,201,122,.18),transparent 55%),
        radial-gradient(circle at 90% 100%,rgba(202,52,0,.25),transparent 60%);
      opacity:.7;
      pointer-events:none;
    }
    .secret-menu-inner{position:relative;z-index:1;}
    .secret-menu.visible{display:block;animation:fadeInUp .38s ease forwards;}
    .secret-menu-title{font-family:"Georgia","Times New Roman",serif;font-size:1rem;margin-bottom:.25rem;}
    .secret-menu-desc{color:var(--muted);margin-bottom:.5rem;}
    .secret-menu-meta{font-size:.78rem;color:var(--muted);}
    .secret-price{color:var(--gold);font-weight:600;}
    .secret-badge{
      display:inline-block;margin-left:.4rem;padding:.05rem .45rem;
      border-radius:999px;border:1px solid rgba(202,52,0,.7);
      font-size:.68rem;text-transform:uppercase;letter-spacing:.12em;color:#f5e6dc;
    }
    @keyframes fadeInUp{0%{opacity:0;transform:translateY(8px);}100%{opacity:1;transform:translateY(0);} }

    /* Menu */
    .menu-grid{display:grid;grid-template-columns:minmax(0,1.2fr) minmax(0,1fr);gap:2rem;}
    .menu-columns{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:1rem;}
    .menu-group-title{text-transform:uppercase;letter-spacing:.22em;font-size:.75rem;color:var(--gold);margin-bottom:.4rem;}
    .menu-item{padding:.55rem 0;border-bottom:1px dashed rgba(245,201,122,.25);position:relative;}
    .menu-item:last-child{border-bottom:none;}
    .menu-item-name{font-size:.92rem;display:flex;justify-content:space-between;gap:.4rem;}
    .menu-item-name span{color:var(--gold);font-size:.85rem;opacity:.95;}
    .menu-item-desc{font-size:.82rem;color:var(--muted);margin-top:.1rem;}
    .menu-badges{margin-top:.25rem;display:flex;flex-wrap:wrap;gap:.25rem;font-size:.7rem;}
    .badge{border-radius:999px;border:1px solid rgba(255,255,255,.12);padding:.05rem .45rem;text-transform:uppercase;letter-spacing:.12em;color:var(--muted);}

    /* Sold Out stamp (ONLY ‚ÄúSOLD OUT‚Äù) */
    .hype-stamp{
      position:absolute;
      top:.5rem;
      right:.2rem;
      transform:rotate(12deg);
      border:2px solid color-mix(in srgb,var(--gold) 70%,transparent);
      color:color-mix(in srgb,var(--gold) 85%,#fff 15%);
      padding:.15rem .55rem;
      border-radius:10px;
      text-transform:uppercase;
      letter-spacing:.18em;
      font-size:.62rem;
      background:rgba(5,3,8,.6);
      box-shadow:0 0 14px rgba(0,0,0,.8),0 0 18px color-mix(in srgb,var(--accent) 55%,transparent);
      display:none;
      pointer-events:none;
    }
    .menu-item.is-soldout .hype-stamp{display:inline-block;}
    .menu-item.is-soldout{opacity:.72;}
    .menu-item.is-soldout .menu-item-desc{filter:saturate(.9);}

    /* Almost Gone list panel */
    .almost-gone-panel{
      border:1px solid rgba(245,201,122,.25);
      border-radius:14px;
      padding:.9rem 1.1rem;
      margin:.9rem 0 1.2rem;
      background:radial-gradient(circle at top left,color-mix(in srgb,var(--accent-soft) 22%,transparent),rgba(5,3,8,.92));
      box-shadow:0 0 18px rgba(0,0,0,.65);
    }
    .almost-gone-title{
      text-transform:uppercase;
      letter-spacing:.22em;
      font-size:.72rem;
      color:var(--gold);
      margin-bottom:.35rem;
    }
    .almost-gone-list{font-size:.82rem;color:var(--muted);}
    .almost-gone-list strong{color:var(--gold);}

    .menu-art{
      border-radius:20px;
      border:1px solid rgba(245,201,122,.25);
      padding:1rem;
      background:radial-gradient(circle at top,color-mix(in srgb,var(--accent) 60%,transparent),var(--bg));
      font-size:.82rem;
    }
    .menu-art h4{
      font-size:.9rem;text-transform:uppercase;letter-spacing:.18em;color:var(--gold);
      margin-bottom:.5rem;
    }
    .menu-art p{color:var(--muted);}
    .menu-spell{font-family:"Georgia","Times New Roman",serif;font-style:italic;margin-top:.5rem;color:#f8e8c4;}

    /* About */
    .about-grid{display:grid;grid-template-columns:minmax(0,1fr) minmax(0,1.1fr);gap:2rem;align-items:flex-start;}
    .about-crest{
      border-radius:18px;border:1px solid rgba(245,201,122,.25);
      padding:1.2rem 1.3rem;
      background:radial-gradient(circle at top,rgba(10,6,18,.95),rgba(5,3,8,.98));
      text-align:center;
      box-shadow:0 0 22px rgba(0,0,0,.9);
    }
    .about-crest-logo{
      max-width:260px;width:100%;height:auto;display:block;margin:0 auto .8rem;
      filter:drop-shadow(0 0 18px color-mix(in srgb,var(--accent) 85%,transparent));
    }
    .about-crest-title{text-transform:uppercase;letter-spacing:.2em;font-size:.75rem;color:var(--gold);margin-bottom:.6rem;}
    .about-crest-text{font-size:.82rem;color:var(--muted);line-height:1.7;font-family:"Georgia","Times New Roman",serif;}
    .about-content{display:flex;flex-direction:column;gap:1.2rem;}
    .about-box{
      border-radius:18px;border:1px solid rgba(245,201,122,.25);
      padding:1.1rem 1.2rem;
      background:radial-gradient(circle at top left,color-mix(in srgb,var(--accent-soft) 60%,transparent),rgba(5,3,8,.95));
      font-size:.9rem;color:var(--muted);
    }
    .about-box strong{color:var(--gold);}
    .about-label{text-transform:uppercase;letter-spacing:.22em;font-size:.75rem;color:var(--gold);margin-bottom:.4rem;display:block;}
    .about-quote{font-family:"Georgia","Times New Roman",serif;font-style:italic;margin-top:.7rem;color:#f8e8c4;}
    .about-highlight{
      border-radius:16px;border:1px dashed rgba(245,201,122,.4);
      padding:.9rem 1rem;font-size:.82rem;color:var(--muted);
      background:radial-gradient(circle at bottom right,color-mix(in srgb,var(--accent-soft) 40%,transparent),rgba(5,3,8,.96));
    }

    /* Contact */
    .contact{background:radial-gradient(circle at top,rgba(21,2,11,1),var(--bg));}
    .summon-grid{display:grid;grid-template-columns:minmax(0,1.15fr) minmax(0,1fr);gap:2rem;}
    .summon-calendar{
      border-radius:20px;border:1px solid rgba(245,201,122,.25);
      padding:1.3rem 1.4rem;
      background:radial-gradient(circle at top,color-mix(in srgb,var(--accent) 65%,transparent),var(--bg));
      box-shadow:0 0 24px rgba(0,0,0,.9);
      font-size:.85rem;color:var(--muted);
    }
    .summon-calendar h4{
      font-size:.9rem;text-transform:uppercase;letter-spacing:.16em;color:var(--gold);
      margin-bottom:.4rem;
    }
    .calendar-wrap{
      margin-top:.6rem;border-radius:14px;overflow:hidden;background:#050308;
      border:1px solid rgba(245,201,122,.3);height:560px;
    }
    .calendar-wrap iframe{width:100%;height:100%;border:0;background:transparent;}

    .contact-card{
      border-radius:20px;border:1px solid rgba(245,201,122,.25);
      padding:1.3rem 1.4rem;
      background:radial-gradient(circle at top left,color-mix(in srgb,var(--accent-soft) 70%,transparent),rgba(5,3,8,.96));
      box-shadow:0 0 24px rgba(0,0,0,.9);
      font-size:.85rem;color:var(--muted);
    }
    .contact-card-title{
      font-size:.95rem;text-transform:uppercase;letter-spacing:.18em;color:var(--gold);
      margin-bottom:.4rem;
    }
    .contact-card-list{list-style:none;padding-left:0;margin:.3rem 0 .6rem;}
    .contact-card-list li{margin-bottom:.25rem;}
    .contact-card-list li::before{content:"‚ú∂";color:var(--accent);margin-right:.35rem;}

    footer{
      border-top:1px solid rgba(245,201,122,.18);
      padding:1rem 0 1.6rem;
      font-size:.75rem;color:var(--muted);
    }
    .footer-row{display:flex;flex-wrap:wrap;gap:.75rem;align-items:center;justify-content:space-between;}
    .footer-links{display:flex;flex-wrap:wrap;gap:.8rem;}

    /* Staff Gate (admin drawer) */
    .staff-gate{
      position:fixed;
      inset:auto 18px 18px auto;
      width:min(420px,calc(100vw - 36px));
      border-radius:18px;
      border:1px solid rgba(245,201,122,.28);
      background:radial-gradient(circle at top left,rgba(15,3,10,.96),rgba(5,3,8,.98));
      box-shadow:0 0 26px rgba(0,0,0,.9),0 0 24px color-mix(in srgb,var(--accent) 30%,transparent);
      padding:1rem 1.05rem;
      transform:translateY(18px);
      opacity:0;
      pointer-events:none;
      transition:opacity .25s ease,transform .25s ease;
      z-index:9998;
    }
    .staff-gate.open{
      opacity:1;
      transform:translateY(0);
      pointer-events:auto;
    }
    .staff-title{
      display:flex;align-items:center;justify-content:space-between;gap:.75rem;
      margin-bottom:.65rem;
    }
    .staff-title h4{
      font-family:"Georgia","Times New Roman",serif;
      text-transform:uppercase;
      letter-spacing:.14em;
      font-size:.9rem;
      color:var(--gold);
    }
    .staff-close{
      border:1px solid rgba(245,201,122,.35);
      border-radius:999px;
      background:rgba(5,3,8,.55);
      color:var(--gold);
      padding:.25rem .6rem;
      cursor:pointer;
      letter-spacing:.14em;
      text-transform:uppercase;
      font-size:.68rem;
    }
    .staff-grid{
      display:grid;
      grid-template-columns:repeat(2,minmax(0,1fr));
      gap:.75rem;
      margin-top:.6rem;
    }
    .staff-box{
      border:1px solid rgba(245,201,122,.22);
      border-radius:14px;
      padding:.7rem .75rem;
      background:radial-gradient(circle at top left,color-mix(in srgb,var(--accent-soft) 18%,transparent),rgba(5,3,8,.92));
      font-size:.78rem;
      color:var(--muted);
    }
    .staff-box strong{color:var(--gold);letter-spacing:.12em;text-transform:uppercase;font-size:.7rem;display:block;margin-bottom:.3rem;}
    .staff-row{display:flex;gap:.5rem;align-items:center;justify-content:space-between;margin-top:.35rem;}
    .staff-row label{font-size:.74rem;color:var(--muted);}
    .staff-row input{
      width:88px;
      border-radius:10px;
      border:1px solid rgba(245,201,122,.22);
      background:rgba(0,0,0,.25);
      color:var(--text);
      padding:.35rem .45rem;
      outline:none;
    }
    .staff-actions{display:flex;gap:.5rem;flex-wrap:wrap;margin-top:.75rem;}
    .staff-btn{
      border-radius:999px;
      border:1px solid rgba(245,201,122,.35);
      background:rgba(5,3,8,.55);
      color:var(--gold);
      padding:.4rem .85rem;
      font-size:.72rem;
      letter-spacing:.14em;
      text-transform:uppercase;
      cursor:pointer;
    }
    .staff-btn.primary{
      border-color:color-mix(in srgb,var(--gold) 70%,transparent);
      background:linear-gradient(135deg,color-mix(in srgb,var(--accent) 85%,transparent),color-mix(in srgb,var(--accent-soft) 85%,transparent));
      color:#fff;
      box-shadow:0 0 14px color-mix(in srgb,var(--accent) 55%,transparent);
    }

    @media (max-width:840px){
      .hero-grid,.menu-grid,.about-grid,.summon-grid{grid-template-columns:minmax(0,1fr);}
      .nav-links-left{display:none;}
      .nav{justify-content:space-between;}
      .logo-img{height:80px;}
      .hb-header.scrolled .logo-img{height:62px;}
      .calendar-wrap{height:440px;}
      .staff-grid{grid-template-columns:minmax(0,1fr);}
    }
  </style>
</head>

<body>
  <!-- Loading overlay -->
  <div class="loader-overlay" id="loader">
    <div class="loader-inner">
      <div class="loader-symbol">CB</div>
      <div class="loader-text-main">Summoning the Underworld Kitchen‚Ä¶</div>
      <div class="loader-text-sub">Please wait, mortal.</div>
    </div>
  </div>

  <!-- Banner -->
  <div class="coming-soon-banner">
    Cerberus Bites ‚Ä¢ Sourdough from the Underworld ‚Ä¢ Feast in the Underworld
  </div>

  <!-- Header -->
  <header class="hb-header">
    <div class="container">
      <div class="nav">
        <nav class="nav-links-left">
          <a href="#menu">Menu</a>
          <a href="#about">Lore</a>
        </nav>

        <div class="nav-center">
          <!-- keep as link; JS prevents navigation during press/gesture -->
          <a href="#top" class="nav-logo-link" id="logoGate" aria-label="Cerberus Crest">
            <img src="CerberusLogo2.png" alt="Cerberus Bites Logo" class="logo-img">
          </a>
          <div class="nav-brand-text">
            <div class="brand-name">Cerberus Bites</div>
            <div class="brand-subtitle">Sourdough from the Underworld</div>
          </div>
        </div>

        <div class="nav-right">
          <a href="#contact" class="nav-cta">Summon the Hound</a>
        </div>
      </div>
    </div>
  </header>

  <main>
    <!-- Hero -->
    <section class="hero" id="top">
      <div class="container">
        <div class="hero-grid">
          <div>
            <div class="hero-eyebrow">house-fermented sourdough ‚Ä¢ butter-crisped ‚Ä¢ guarded by the hound</div>

            <h1 class="hero-title">
              <span class="hero-brand">Cerberus Bites</span>
              <span class="hero-subbrand">Sourdough from the Underworld</span>
            </h1>

            <p class="hero-subtitle">
              Butter-crisped melts on house-fermented sourdough ‚Äî pulled hot and watched closely.
              If the hound doesn‚Äôt approve it, it doesn‚Äôt leave the kitchen.
            </p>

            <div class="hero-actions">
              <a href="#menu" class="btn btn-primary">View the Menu</a>
              <a href="#contact" class="btn btn-ghost">Book the Hound</a>
              <div class="hero-note">Ask about allergies at the window ‚Äî we‚Äôll guide your path.</div>
            </div>
          </div>

          <div class="hero-art">
            <div class="hero-art-inner">
              <div class="hero-art-title">Tonight in the Underworld</div>
              <div class="hero-art-grid">
                <div class="hero-card" id="opsAlmostGone">
                  <h4>Almost Gone</h4>
                  <p>Loading‚Ä¶</p>
                </div>
                <div class="hero-card" id="opsSoldOut">
                  <h4>Sold Out</h4>
                  <p>Loading‚Ä¶</p>
                </div>
                <div class="hero-card" id="opsBatchCounter">
                  <h4>Batch Counter</h4>
                  <p>Loading‚Ä¶</p>
                </div>
                <div class="hero-card" id="opsNextDrop">
                  <h4>Next Drop</h4>
                  <p>Loading‚Ä¶</p>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>
    </section>

    <!-- Menu -->
    <section id="menu">
      <div class="container">
        <div class="section-header">
          <div class="section-eyebrow">The Wicked Feast</div>
          <div class="section-title-row">
            <h2 class="section-title">CERBERUS BITES Menu</h2>
            <button class="secret-star" id="secretStar" aria-label=" " type="button"><span>‚ú∂</span></button>
          </div>
          <p class="section-subtitle">
            All melts served on house-fermented sourdough.
          </p>

          <div id="seasonCallout" class="season-callout">
            <strong class="season-title">Seasonal Shout-Out</strong>
            <p class="season-message">Loading the season‚Äôs omen‚Ä¶</p>
          </div>

          <div class="almost-gone-panel" id="almostGonePanel" style="display:none;">
            <div class="almost-gone-title">What‚Äôs Almost Gone</div>
            <div class="almost-gone-list" id="almostGoneList">‚Äî</div>
          </div>
        </div>

        <div class="menu-grid">
          <div>
            <div class="menu-columns">
              <div>
                <div class="menu-group-title">ü•™ Melts</div>

                <div class="menu-item" data-item-id="cerberus-melt">
                  <div class="hype-stamp">SOLD OUT</div>
                  <div class="menu-item-name">Cerberus Melt <span>$9</span></div>
                  <div class="menu-item-desc">Triple cheese on butter-crisped sourdough.</div>
                </div>

                <div class="menu-item" data-item-id="gatekeeper-turkey">
                  <div class="hype-stamp">SOLD OUT</div>
                  <div class="menu-item-name">Gatekeeper Turkey Melt <span>$11</span></div>
                  <div class="menu-item-desc">Smoked turkey, sharp cheddar, black garlic aioli.</div>
                </div>

                <div class="menu-item" data-item-id="hellfire-chicken">
                  <div class="hype-stamp">SOLD OUT</div>
                  <div class="menu-item-name">Hellfire Chicken Melt <span>$11</span></div>
                  <div class="menu-item-desc">Blackened chicken, pepper jack, ember mayo.</div>
                </div>

                <div class="menu-item" data-item-id="persephone-garden">
                  <div class="hype-stamp">SOLD OUT</div>
                  <div class="menu-item-name">Persephone‚Äôs Garden (Vegan) üåø <span>$10</span></div>
                  <div class="menu-item-desc">Roasted mushrooms, caramelized onion, herb oil.</div>
                </div>
              </div>

              <div>
                <div class="menu-group-title">ü•£ Sides</div>

                <div class="menu-item" data-item-id="tomato-soup">
                  <div class="hype-stamp">SOLD OUT</div>
                  <div class="menu-item-name">Charred Tomato Soup (Cup) <span>$4</span></div>
                  <div class="menu-item-desc">Rich, smoky, perfect for dipping.</div>
                  <div class="menu-badges">
                    <div class="badge">Add to any melt +$3</div>
                  </div>
                </div>
              </div>

            </div>
          </div>

          <aside class="menu-art">
            <h4>The Spellbook of Sourdough</h4>
            <p>
              House-fermented loaves. Butter-crisped edges. Cheese pulls that don‚Äôt lie.
              The hound keeps the gate ‚Äî and the standard.
            </p>
            <p class="menu-spell">
              ‚ÄúThree heads. One rule: the bread must crackle.‚Äù
            </p>
          </aside>
        </div>

        <!-- SECRET MENU -->
        <div id="secretMenu" class="secret-menu" aria-hidden="true">
          <div class="secret-menu-inner">
            <div class="secret-menu-title">The Black Gate</div>
            <p class="secret-menu-desc">
              Extra-butter sourdough, triple cheese, black garlic aioli, charred dark.
              <br><em>When it‚Äôs gone, it‚Äôs gone.</em>
            </p>
            <p class="secret-menu-meta">
              <span class="secret-price">$12</span>
              <span class="secret-badge">Hidden</span>
            </p>
          </div>
        </div>

      </div>
    </section>

    <!-- About / Lore -->
    <section id="about">
      <div class="container">
        <div class="section-header">
          <div class="section-eyebrow">Lore of the Underworld Kitchen</div>
          <h2 class="section-title">The Crest & The Creed</h2>
          <p class="section-subtitle">
            The gate is watched. The flames are measured. The sourdough is sacred.
          </p>
        </div>

        <div class="about-grid">
          <div class="about-crest">
            <img src="CerberusLogo2.png" alt="Cerberus Bites Crest Logo" class="about-crest-logo">
            <div class="about-crest-title">Official Crest of Cerberus Bites</div>
            <p class="about-crest-text">
              <strong>We are the guardians of souls who enter this realm.</strong><br>
              I watch the flames.<br>
              I guard the bites.<br>
              I guide the hungry.<br>
              We are the eternal watchdog of hunger and flame ‚Äî and if we don‚Äôt approve it, it doesn‚Äôt leave the kitchen.
            </p>
          </div>

          <div class="about-content">
            <div class="about-box">
              <span class="about-label">The Underworld Standard</span>
              <p>
                Cerberus Bites is built for speed, profit, and obsession-level consistency:
                sourdough done right, butter-crisped, and served hot.
              </p>
              <div class="about-quote">‚ÄúIf it‚Äôs not crackling, it‚Äôs not leaving.‚Äù</div>
            </div>

            <div class="about-highlight">
              <span class="about-label">What We Stand For</span>
              <p>‚ú∂ <strong>Quality first.</strong> Sourdough is the star ‚Äî everything else serves it.</p>
              <p style="margin-top:0.4rem;">‚ú∂ <strong>Fast service.</strong> A tight menu that moves.</p>
              <p style="margin-top:0.4rem;">‚ú∂ <strong>Mythic experience.</strong> The gatekeeper vibe is part of the meal.</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Contact / Summon -->
    <section id="contact" class="contact">
      <div class="container">
        <div class="section-header">
          <div class="section-eyebrow">Summon the Underworld Kitchen</div>
          <h2 class="section-title">Bookings & General Inquiries</h2>
          <p class="section-subtitle">
            Use the calendar to claim your date. For everything else, message the gates below.
          </p>
        </div>

        <div class="summon-grid">
          <div class="summon-calendar">
            <h4>Claim Your Date</h4>
            <p>Choose your time directly on the calendar.</p>
            <div class="calendar-wrap">
              <iframe
                src="https://cerberusbites.setmore.com"
                loading="lazy"
                scrolling="yes"
                frameborder="0"
                allow="web-share; payment"
                referrerpolicy="no-referrer-when-downgrade"
                title="Cerberus Bites booking calendar"></iframe>
            </div>
            <p style="margin-top:.75rem;">
              Trouble seeing the calendar?
              <a href="https://cerberusbites.setmore.com" target="_blank" rel="noopener">Open booking in a new tab</a>
            </p>
          </div>

          <aside class="contact-card">
            <div class="contact-card-title">General Inquiries</div>
            <p>For questions, collaborations, press, or other mischief:</p>
            <ul class="contact-card-list">
              <li><strong>Email:</strong> <a href="mailto:cerberusbites@hotmail.com">cerberusbites@hotmail.com</a></li>
              <li><strong>Phone:</strong> <a href="tel:15409448898">540-944-8898</a></li>
              <li><strong>Instagram:</strong> <a href="https://www.instagram.com/cerberus_bites" target="_blank">@cerberus_bites</a></li>
              <li><strong>TikTok:</strong> <a href="https://www.tiktok.com/@cerberusbites" target="_blank">@cerberusbites</a></li>
            </ul>
          </aside>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="container">
      <div class="footer-row">
        <div>¬© <span id="year"></span> Cerberus Bites. All rights reserved.</div>
        <div class="footer-links">
          <span>Sourdough from the Underworld.</span>
          <span>Feast in the Underworld.</span>
        </div>
      </div>
    </div>
  </footer>

  <!-- Staff Gate (hidden admin panel) -->
  <div class="staff-gate" id="staffGate" aria-hidden="true">
    <div class="staff-title">
      <h4>Staff Gate</h4>
      <button class="staff-close" id="staffClose" type="button">Close</button>
    </div>

    <div class="staff-grid" id="staffGrid"></div>

    <div class="staff-actions">
      <button class="staff-btn primary" id="staffSave" type="button">Save</button>
      <button class="staff-btn" id="staffReset" type="button">Reset</button>
    </div>
  </div>

  <script>
    /* ==========================================================
       0) Staff PIN
       ========================================================== */
    const STAFF_PIN = "1395";

    /* ==========================================================
       1) Sabbat Color Shifting
       ========================================================== */
    function fmt(d){
      const m=String(d.getMonth()+1).padStart(2,"0");
      const day=String(d.getDate()).padStart(2,"0");
      return `${m}/${day}`;
    }

    const sabbats=[
      { key:"yule", name:"Yule", month:11, day:21, windowDays:12,
        palette:{ bg:"#050308", bgAlt:"#0c050b", accent:"#2aa1ff", accentSoft:"#1b3a6a", gold:"#f5c97a", text:"#f4f2f6", muted:"#b3a9c0", border:"#2a2a44" } },
      { key:"imbolc", name:"Imbolc", month:1, day:1, windowDays:10,
        palette:{ bg:"#07060a", bgAlt:"#0d0b12", accent:"#f0b429", accentSoft:"#b07a12", gold:"#fff1c9", text:"#f4f2f6", muted:"#c7bdd6", border:"#2d2338" } },
      { key:"ostara", name:"Ostara", month:2, day:20, windowDays:10,
        palette:{ bg:"#05060a", bgAlt:"#0a0f14", accent:"#3bd16f", accentSoft:"#1c7c44", gold:"#d7ffb9", text:"#f4f2f6", muted:"#b9c8bf", border:"#26332c" } },
      { key:"beltane", name:"Beltane", month:4, day:1, windowDays:10,
        palette:{ bg:"#07020a", bgAlt:"#120311", accent:"#ff2f7a", accentSoft:"#a10f44", gold:"#ffd1e1", text:"#f4f2f6", muted:"#d2b6c8", border:"#3a2030" } },
      { key:"litha", name:"Litha", month:5, day:21, windowDays:10,
        palette:{ bg:"#050308", bgAlt:"#0b070a", accent:"#ff7a18", accentSoft:"#b84500", gold:"#ffe2a8", text:"#f4f2f6", muted:"#cdbfa8", border:"#3a2b1b" } },
      { key:"lughnasadh", name:"Lughnasadh", month:7, day:1, windowDays:10,
        palette:{ bg:"#050308", bgAlt:"#0c050b", accent:"#f1c232", accentSoft:"#9b6c0d", gold:"#fff0b3", text:"#f4f2f6", muted:"#d0c3a6", border:"#3a2d1a" } },
      { key:"mabon", name:"Mabon", month:8, day:22, windowDays:10,
        palette:{ bg:"#050308", bgAlt:"#0b0506", accent:"#c66a2a", accentSoft:"#7a2e10", gold:"#f5c97a", text:"#f4f2f6", muted:"#c4b2a3", border:"#3b251b" } },
      { key:"samhain", name:"Samhain", month:9, day:31, windowDays:12,
        palette:{ bg:"#040207", bgAlt:"#0b0410", accent:"#8f2cff", accentSoft:"#3b0f6d", gold:"#f5c97a", text:"#f4f2f6", muted:"#c0b4d1", border:"#2f1b3a" } },
    ];

    const BASE={
      bg:"#050308", bgAlt:"#0c050b",
      accent:"#ca3400", accentSoft:"#7e0f1d",
      gold:"#f5c97a", text:"#f4f2f6",
      muted:"#b3a9c0", border:"#312033"
    };

    function clampDateToYear(now,month,day){
      return new Date(now.getFullYear(),month,day,12,0,0);
    }
    function dayDiff(a,b){
      const ms=24*60*60*1000;
      const ua=Date.UTC(a.getFullYear(),a.getMonth(),a.getDate());
      const ub=Date.UTC(b.getFullYear(),b.getMonth(),b.getDate());
      return Math.round((ua-ub)/ms);
    }
    function applyPalette(p,themeName,windowLabel){
      const r=document.documentElement.style;
      r.setProperty("--bg",p.bg);
      r.setProperty("--bg-alt",p.bgAlt);
      r.setProperty("--accent",p.accent);
      r.setProperty("--accent-soft",p.accentSoft);
      r.setProperty("--gold",p.gold);
      r.setProperty("--text",p.text);
      r.setProperty("--muted",p.muted);
      r.setProperty("--border",p.border);
      r.setProperty("--theme-name",`"${themeName}"`);
      r.setProperty("--theme-window",`"${windowLabel}"`);
    }
    function setHolidayTheme(){
      const now=new Date();
      let active=null;

      for(const s of sabbats){
        const targetThis=clampDateToYear(now,s.month,s.day);
        const targetPrev=new Date(now.getFullYear()-1,s.month,s.day,12,0,0);
        const targetNext=new Date(now.getFullYear()+1,s.month,s.day,12,0,0);
        for(const t of [targetPrev,targetThis,targetNext]){
          const d=Math.abs(dayDiff(now,t));
          if(d<=s.windowDays){
            if(!active || d<active.distance){
              active={ sabbat:s, target:t, distance:d };
            }
          }
        }
      }

      if(active){
        const s=active.sabbat;
        const start=new Date(active.target); start.setDate(start.getDate()-s.windowDays);
        const end=new Date(active.target); end.setDate(end.getDate()+s.windowDays);
        applyPalette(s.palette,s.name,`${fmt(start)}‚Äì${fmt(end)}`);
        return;
      }

      applyPalette(BASE,"Between Sabbats","Base palette");
    }

    /* ==========================================================
       2) Seasonal Shout-Out
       ========================================================== */
    function setSeasonCallout(){
      const seasonCallout=document.getElementById("seasonCallout");
      const seasonMessage=seasonCallout ? seasonCallout.querySelector(".season-message") : null;
      const seasonTitleEl=seasonCallout ? seasonCallout.querySelector(".season-title") : null;
      if(!seasonCallout || !seasonMessage || !seasonTitleEl) return;

      const now=new Date();
      const m=now.getMonth();

      const titles=["üî• Seasonal Shout-Out üî•","The Season Hungers‚Ä¶","A Sign from the Gate"];
      seasonTitleEl.textContent=titles[Math.floor(Math.random()*titles.length)];

      let msg="";
      if(m===11 || m===0 || m===1){
        msg=`‚ùÑÔ∏è <strong>Cold nights at the gate</strong><br>
             Soup hits harder in winter ‚Äî add Charred Tomato Soup to any melt for +$3.`;
      } else if(m>=2 && m<=4){
        msg=`üåø <strong>Spring returns</strong><br>
             Persephone‚Äôs Garden is in bloom ‚Äî roasted mushrooms, onion, herb oil.`;
      } else if(m>=5 && m<=7){
        msg=`‚òÄÔ∏è <strong>Summer heat</strong><br>
             Hellfire Chicken brings the ember ‚Äî ask for extra char if you‚Äôre brave.`;
      } else {
        msg=`üçÇ <strong>Autumn at the gate</strong><br>
             Gatekeeper Turkey + soup is the cleanest combo when the air turns sharp.`;
      }
      seasonMessage.innerHTML=msg;
    }

    /* ==========================================================
       3) Secret menu ‚Äî FIXED
       - click star => show
       - auto-hide after 6s
       - does NOT instantly close (stopPropagation)
       - click outside => hide
       ========================================================== */
    function initSecretMenu(){
      const star=document.getElementById("secretStar");
      const secret=document.getElementById("secretMenu");
      if(!star || !secret) return;

      let hideTimer=null;

      function hide(){
        clearTimeout(hideTimer);
        secret.classList.remove("visible");
        star.classList.remove("active");
        secret.setAttribute("aria-hidden","true");
      }
      function show(){
        clearTimeout(hideTimer);
        secret.classList.add("visible");
        star.classList.add("active");
        secret.setAttribute("aria-hidden","false");
        hideTimer=setTimeout(hide, 6000);
      }

      star.addEventListener("click",(e)=>{
        e.preventDefault();
        e.stopPropagation();            // ‚úÖ prevents the document handler from immediately hiding it
        const open = secret.classList.contains("visible");
        open ? hide() : show();
      });

      secret.addEventListener("click",(e)=>{
        e.stopPropagation();            // ‚úÖ clicking inside panel won‚Äôt close it
      });

      document.addEventListener("click",()=>{
        if(secret.classList.contains("visible")) hide();
      });

      window.addEventListener("keydown",(e)=>{
        if(e.key==="Escape") hide();
      });
    }

    /* ==========================================================
       4) Loader + header reveal
       ========================================================== */
    function hideLoader(){
      document.body.classList.add("loaded");
      const header=document.querySelector(".hb-header");
      if(header) header.classList.add("revealed");
    }
    window.addEventListener("load",function(){
      const y=document.getElementById("year");
      if(y) y.textContent=new Date().getFullYear();
      hideLoader();
    });
    setTimeout(hideLoader,2500);
    window.addEventListener("scroll",function(){
      const header=document.querySelector(".hb-header");
      if(!header) return;
      header.classList.toggle("scrolled",window.scrollY>20);
    });

    /* ==========================================================
       5) Stock Tracker + Almost Gone + Ops
       ========================================================== */
    const TRACKED = [
      { id:"cerberus-melt", name:"Cerberus Melt" },
      { id:"gatekeeper-turkey", name:"Gatekeeper Turkey Melt" },
      { id:"hellfire-chicken", name:"Hellfire Chicken Melt" },
      { id:"persephone-garden", name:"Persephone‚Äôs Garden" },
      { id:"tomato-soup", name:"Charred Tomato Soup" }
    ];

    const STATE_KEY = "cb_stock_v1";

    function defaultState(){
      const items={};
      TRACKED.forEach(it=>{ items[it.id]={ left: 6 }; });
      if(items["tomato-soup"]) items["tomato-soup"].left = 10;
      return { items, nextDrop:"Next batch in ~20 min", nextDropTime:"" };
    }
    function getState(){
      try{ return JSON.parse(localStorage.getItem(STATE_KEY)) || defaultState(); }
      catch(e){ return defaultState(); }
    }
    function setState(next){ localStorage.setItem(STATE_KEY, JSON.stringify(next)); }

    function statusFor(st){
      const left = (st && typeof st.left==="number") ? st.left : 0;
      if(left <= 0) return "SOLD OUT";
      if(left <= 2) return "ALMOST GONE";
      return "LIVE";
    }

    function plural(n, word){ return n===1 ? `${n} ${word}` : `${n} ${word}s`; }

    function renderMenuStatuses(){
      const state=getState();
      TRACKED.forEach(it=>{
        const el=document.querySelector(`[data-item-id="${it.id}"]`);
        if(!el) return;
        const st=state.items[it.id] || {left:0};
        const status=statusFor(st);
        el.classList.toggle("is-soldout", status==="SOLD OUT");
      });
    }

    function renderAlmostGoneTop(){
      const state=getState();
      const panel=document.getElementById("almostGonePanel");
      const listEl=document.getElementById("almostGoneList");
      if(!panel || !listEl) return;

      const almost = TRACKED
        .map(it=>{
          const st=state.items[it.id] || {left:0};
          return { it, st, status: statusFor(st) };
        })
        .filter(x=>x.status==="ALMOST GONE")
        .sort((a,b)=>(a.st.left||0)-(b.st.left||0))
        .slice(0,4);

      if(almost.length===0){
        panel.style.display="none";
        return;
      }

      panel.style.display="";
      listEl.innerHTML = almost
        .map(x=>`<strong>${x.it.name}</strong> ‚Äî ${plural(x.st.left,"batch")} left`)
        .join(" ‚Ä¢ ");
    }

    function renderOps(){
      const state=getState();
      const list=TRACKED.map(it=>{
        const st=state.items[it.id] || {left:0};
        return { it, st, status: statusFor(st) };
      });

      const available=list.filter(x=>x.status!=="SOLD OUT");
      const soldout=list.filter(x=>x.status==="SOLD OUT");
      const almost=list.filter(x=>x.status==="ALMOST GONE");

      const elAlmost=document.getElementById("opsAlmostGone");
      if(elAlmost){
        elAlmost.querySelector("p").textContent =
          almost.length ? almost.slice(0,3).map(x=>`${x.it.name} ‚Äî ${plural(x.st.left,"batch")} left`).join(" ‚Ä¢ ")
                        : "Nothing in the danger zone (yet).";
      }

      const elSold=document.getElementById("opsSoldOut");
      if(elSold){
        elSold.querySelector("p").textContent =
          soldout.length ? soldout.slice(0,3).map(x=>x.it.name).join(" ‚Ä¢ ") + (soldout.length>3?` +${soldout.length-3} more`:"")
                         : "No sell-outs yet.";
      }

      const elBatch=document.getElementById("opsBatchCounter");
      if(elBatch){
        const totalLeft=available.reduce((sum,x)=>sum+Math.max(0,(x.st.left||0)),0);
        elBatch.querySelector("p").textContent =
          `${plural(totalLeft,"batch")} left ‚Ä¢ ${plural(almost.length,"item")} low ‚Ä¢ ${plural(available.length,"item")} live`;
      }

      const elDrop=document.getElementById("opsNextDrop");
      if(elDrop){
        const text = state.nextDropTime ? `Next drop: ${state.nextDropTime}` : (state.nextDrop || "Next drop soon");
        elDrop.querySelector("p").textContent=text;
      }
    }

    /* ==========================================================
       6) Staff Gate ‚Äî FIXED (press works + doesn‚Äôt jump page)
       - triple click OR press & hold logo 3s
       - uses pointer events for mobile/desktop reliability
       ========================================================== */
    function buildStaffUI(){
      const grid=document.getElementById("staffGrid");
      if(!grid) return;
      const state=getState();
      grid.innerHTML="";

      TRACKED.forEach(it=>{
        const st=state.items[it.id] || {left:0};
        const box=document.createElement("div");
        box.className="staff-box";
        box.innerHTML = `
          <strong>${it.name}</strong>
          <div class="staff-row">
            <label for="stk_${it.id}">Batches left</label>
            <input id="stk_${it.id}" type="number" min="-1" step="1" value="${st.left}">
          </div>
          <div class="staff-row" style="margin-top:.25rem;">
            <label>Status</label>
            <span style="color:var(--gold);font-size:.72rem;letter-spacing:.12em;text-transform:uppercase;">
              ${statusFor(st)}
            </span>
          </div>
        `;
        grid.appendChild(box);
      });

      const boxDrop=document.createElement("div");
      boxDrop.className="staff-box";
      boxDrop.innerHTML = `
        <strong>Next Drop</strong>
        <div class="staff-row">
          <label for="nextDrop">Text</label>
          <input id="nextDrop" type="text" value="${state.nextDrop || "Next batch in ~20 min"}" style="width:160px;">
        </div>
        <div class="staff-row">
          <label for="nextDropTime">Exact time</label>
          <input id="nextDropTime" type="text" value="${state.nextDropTime || ""}" style="width:160px;" placeholder="e.g. 9:30 PM">
        </div>
      `;
      grid.appendChild(boxDrop);
    }

    function openGate(){
      const entered = prompt("Enter Staff PIN:");
      if(String(entered) !== String(STAFF_PIN)){
        alert("Access denied.");
        return;
      }
      const gate=document.getElementById("staffGate");
      if(!gate) return;
      gate.classList.add("open");
      gate.setAttribute("aria-hidden","false");
      buildStaffUI();
    }

    function closeGate(){
      const gate=document.getElementById("staffGate");
      if(!gate) return;
      gate.classList.remove("open");
      gate.setAttribute("aria-hidden","true");
    }

    function saveFromStaffUI(){
      const state=getState();
      TRACKED.forEach(it=>{
        const inp=document.getElementById(`stk_${it.id}`);
        if(!inp) return;
        const n=parseInt(inp.value,10);
        state.items[it.id]={ left: isNaN(n) ? 0 : n };
      });

      const nextDrop=document.getElementById("nextDrop");
      const nextDropTime=document.getElementById("nextDropTime");
      state.nextDrop = nextDrop ? nextDrop.value.trim() : state.nextDrop;
      state.nextDropTime = nextDropTime ? nextDropTime.value.trim() : state.nextDropTime;

      setState(state);

      renderMenuStatuses();
      renderAlmostGoneTop();
      renderOps();
    }

    function resetState(){
      setState(defaultState());
      buildStaffUI();
      renderMenuStatuses();
      renderAlmostGoneTop();
      renderOps();
    }

    function initStaffGateGesture(){
      const logo=document.getElementById("logoGate");
      if(!logo) return;

      const PRESS_MS = 3000;
      let pressTimer=null;
      let pressFired=false;

      function startPress(e){
        pressFired=false;
        // ‚úÖ prevent the anchor from jumping while you hold
        e.preventDefault();
        clearTimeout(pressTimer);
        pressTimer=setTimeout(()=>{
          pressFired=true;
          openGate();
        }, PRESS_MS);
      }
      function endPress(){
        clearTimeout(pressTimer);
      }

      // Pointer events = reliable across touch + mouse
      logo.addEventListener("pointerdown", startPress);
      logo.addEventListener("pointerup", endPress);
      logo.addEventListener("pointercancel", endPress);
      logo.addEventListener("pointerleave", endPress);

      // Triple click (also prevent jump)
      let clicks=0;
      let clickTimer=null;
      logo.addEventListener("click",(e)=>{
        if(pressFired){
          e.preventDefault();
          e.stopPropagation();
          return;
        }
        e.preventDefault();
        clicks++;
        clearTimeout(clickTimer);
        clickTimer=setTimeout(()=>{ clicks=0; }, 500);
        if(clicks>=3){
          clicks=0;
          openGate();
        }
      });

      // Buttons
      const closeBtn=document.getElementById("staffClose");
      const saveBtn=document.getElementById("staffSave");
      const resetBtn=document.getElementById("staffReset");
      if(closeBtn) closeBtn.addEventListener("click", closeGate);
      if(saveBtn) saveBtn.addEventListener("click", saveFromStaffUI);
      if(resetBtn) resetBtn.addEventListener("click", resetState);

      window.addEventListener("keydown",(e)=>{
        if(e.key==="Escape") closeGate();
      });
    }

    /* ==========================================================
       7) Boot
       ========================================================== */
    (function boot(){
      setHolidayTheme();
      setSeasonCallout();
      initSecretMenu();
      initStaffGateGesture();

      renderMenuStatuses();
      renderAlmostGoneTop();
      renderOps();

      window.addEventListener("storage", ()=>{
        renderMenuStatuses();
        renderAlmostGoneTop();
        renderOps();
      });

      setInterval(renderOps, 2000);
    })();
  </script>
</body>
</html>
